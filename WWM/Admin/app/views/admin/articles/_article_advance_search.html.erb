<!--script src="/javascripts/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery-ui.js" type="text/javascript"></script>
<script src="/javascripts/jquery.fcbkcomplete.js" type="text/javascript"> </script>
<link href="/stylesheets/date-picker.css?1348807293" media="screen" rel="stylesheet" type="text/css" />
<script src="/javascripts/jquery/jquery-ui-timepicker.js" type="text/javascript"></script-->

<!--new js -->
<%=javascript_include_tag "jquery_ujs.js"%>
<%= javascript_include_tag "jquery.tokeninput.js"%>

<%= stylesheet_link_tag 'token-input','token-input-facebook','token-input-mac'%>
<!--end-->

<div class="article_advanced_search new_article_advance_search">
<div class="article_source_section_new row_of_article_info">
<tr>
  <!-- <div class="article_source_new article_left_infos">
    <td class="common_right_align">
        <label for="token-input-search_data_source_id" class="source_label">
            Source:
        </label>
    </td>    
    
    <td colspan="2" class="autocompletion_box">
           <%#selected_sources=(params[:search_data].blank? ? [] : params[:search_data][:source_ids].blank?) ? [] : @site.sources.where(id: params[:search_data][:source_ids])%>
           <%#= raw autocompletion_field("search_source",{:selected => selected_sources})%>	
   </td>
   </div> -->
   <div class="article_source_new article_left_infos">
     <td class="common_right_align">
        <label for="token-input-search_data_category_id" class="category_label">
            Category:
        </label>
     </td>
    
      <td colspan="2" class="autocompletion_box">
        <%selected_section=(params[:search_data].blank? ? [] : params[:search_data][:category_ids].blank?) ? [] : Category.where(id: params[:search_data][:category_ids])%>
		<%= raw autocompletion_field("search_data",{:selected => selected_section})%>
		</td>
     
   </div>
   
   
   <%= hidden_field_tag  "article[source_id]",@site.sources.first.name %>
   
   <div class="article_section_new article_source_new article_rgt_infos">
    <td class="common_right_align">
        <label for="token-input-search_data_tag_id">
            Tags:
        </label>
    </td>
	    <td colspan="2" class="autocompletion_box">
       <%selected_tgs=(params[:search_data].blank? ? [] : params[:search_data][:tag_ids].blank?) ? [] : Tag.where(id: params[:search_data][:tag_ids])%>
		<%= raw autocompletion_field("search_tag",{:selected => selected_tgs})%>
    </td>
   </div>
</tr>
</div>


<div class="tags_authors_new article_source_new row_of_article_info">
<tr>
  <%if false%>
    <td class="common_right_align">
      
        <label for="search_data_volume_and_issue">
            Issue:     
        </label>
    </td>
    <td colspan="3">
        <%= text_field 'search_data', 'volume_and_issue',:class=>'text_style input_text',:size=>30 %>
    </td>
	<%end%>
	<div class="article_tags_new article_source_new article_left_infos">
          <td class="common_right_align">
                <label for="token-input-search_data_author_id">
                    Author:
                </label>
            </td>
            <td colspan="2" class="autocompletion_box">

         <%selected_authors=(params[:search_data].blank? ? [] : params[:search_data][:author_ids].blank?) ? [] : @site.authors.where(id: params[:search_data][:author_ids])%>
		    <%= raw autocompletion_field("search_author",{:selected => selected_authors})%>  
		    </td>
    </div>
    
    				<div id='loading'style='display:none'>
 						<img src='/images/loading_process2.gif'>
					</div>
    
    <div class="article_author_new article_source_new article_rgt_infos">
    	<tr>
     <div class="article_ppl article_left_infos">
      <td class="common_right_align">
    <label for="token-input-search_data_primary_mediu">Primary Medium:</label>
   </td>
         <% allsearchdata = Array.new %>
	<td colspan="2" class="autocompletion_box">
    <%= raw autocompletion_field("search_medium")%>
  </td>
  </div>
  </tr>
 </div>
</tr>
</div>


<!-- <div class="article_primary_medium_new article_source_new row_of_article_info">

</div> -->
<div class="article_pbl_exp row_of_article_info"> 
<tr>
  <div class="article_ppl article_left_infos">
          <td class="common_right_align">
        <label for="search_data_publish_date_id">
            Published Date:
        </label>
    </td>
        <td colspan="2" class="autocompletion_box">
        <div class="date_box">
           <%=raw datetimepicker_input(:search_data, :publish_date, {:minDate => -20, :maxDate => "+1M +10D", :tabindex => 70, :value=>(params[:search_data][:publish_date] if params[:search_data] and params[:search_data][:publish_date])}) %>
       </div>
                    
    </td>
   </div>
   <div class="article_exp article_rgt_infos">
            <td class="common_right_align">
        <label for="search_data_expiry_date_id" class="expiry_date_label">
            Expiry Date:
        </label>
    </td>
    <td colspan="2" class="autocompletion_box">
     <div class="date_box">
            <%=raw datetimepicker_input(:search_data, :expiry_date, {:minDate => -20, :maxDate => "+1M +10D", :tabindex => 70, :value=>(params[:search_data][:expiry_date] if params[:search_data] and params[:search_data][:expiry_date])}) %>
        </div>

      </td>
      </div>
</tr>
</div>
<div class="article_add_new_button">
<tr>
    <td colspan="4">
        <div class="for_advance_search">
            <div class="adminButton right_label button">
 <%if params[:controller] == "admin/static_page"%> <a href="javascript:void(0)" class="submit_form" data-fname="multi_advance_search_advance" data-type="new" data-url="/admin/static_page/advance_search" id="Search_02">Advanced Search</a>
                                <%else%> <a href="javascript:void(0)" class="submit_form" data-fname="multi_advance_search_advance" data-type="new" data-url="/admin/articles/advance_search" id="Search_02">Advanced Search</a>
                                <%end%>

            </div>
        </div>
    </td>
</tr>
</div>
</div>
<script type="text/javascript">
var article_submitfn=jQuery.fn.article_submit = function() { 
var form_id = jQuery(this).parents("form").attr("id");
 var id=$(this).attr("id");
 var data_url =$('#'+id).data('url');
  var type=$('#'+id).data('type');
  var form_name="multi_advance_search";
  if (type == 'new')
 {
         
  $('form[name='+form_name+']').attr("action", data_url);
  $('form[name='+form_name+']').submit();
 }
 else if (type == 'edit')
 {
  $('form[name='+form_name+']').attr("action", data_url);
  $('form[name='+form_name+']').submit();
 }
else{
$('form[name='+form_name+']').attr("action", data_url);
$('form[name='+form_name+']').submit();
}
 
    
  };
jQuery(".submit_form").live("click",article_submitfn);
</script>
