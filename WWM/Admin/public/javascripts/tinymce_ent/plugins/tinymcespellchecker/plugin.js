!function(){var a={},b=function(b){for(var c=a[b],e=c.deps,f=c.defn,g=e.length,h=new Array(g),i=0;i<g;++i)h[i]=d(e[i]);var j=f.apply(null,h);if(void 0===j)throw"module ["+b+"] returned undefined";c.instance=j},c=function(b,c,d){if("string"!=typeof b)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+b;if(void 0===d)throw"no definition function for "+b;a[b]={deps:c,defn:d,instance:void 0}},d=function(c){var d=a[c];if(void 0===d)throw"module ["+c+"] was undefined";return void 0===d.instance&&b(c),d.instance},e=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f)e.push(d(a[f]));b.apply(null,b)},f={};f.bolt={module:{api:{define:c,require:e,demand:d}}};var g=c,h=function(a,b){g(a,[],function(){return b})};h("7",tinymce.util.JSON),g("8",["7"],function(a){var b="tinyMCESpellingCache",c=function(){function c(){var c=sessionStorage.getItem(b);return c?a.parse(c):{}}function d(c){var d=a.serialize(c);sessionStorage.setItem(b,d)}function e(a,b){var d=c(),e=d[a],f=void 0!==e?e:{};return b(f)}function f(a,b){var e=c(),f=e[a];void 0===f&&(e[a]={},f=e[a]);var g=b(f);return d(e),g}return{read:e,use:f}},d=function(){var a={},b=function(b,c){var d=void 0!==a[b]?a[b]:{};return a[b]=d,c(d)},c=function(b,c){var d=void 0!==a[b]?a[b]:{};return c(d)};return{read:c,use:b}};return{supported:c,unsupported:d}}),g("1",["7","8"],function(a,b){return function(a){function c(){return"undefined"!=typeof Storage&&null!==sessionStorage}function d(a){return a.replace(/\uFEFF/g,"")}function e(a,b,c,e){k.use(a,function(a){var f=d(b);a[f]={misspelled:c,suggestions:e}})}function f(a){a.suggestions=a.suggestions.slice(0,l)}function g(a,b){return k.read(a,function(a){var c=d(b),e=a[c];return void 0!==e&&e.suggestions&&e.suggestions.length>l&&f(e),e})}function h(b){for(var c={},e=[],f=[],h=0;h<b.length;h++){var i=g(a.settings.spellchecker_language,b[h]);i&&i.misspelled&&(c[b[h]]=i),i||(e.push({original:b[h],cleaned:d(b[h])}),f.push(d(b[h])))}return{cachedData:c,wordsToCheck:e,cleanedWordsForServer:f}}function i(b){for(var c=0;c<b.length;c++){var d=g(a.settings.spellchecker_language,b[c].cleaned);d||e(a.settings.spellchecker_language,b[c].cleaned,!1,[])}}function j(b,c,d){var f={};for(var g in b)b[g]&&b[g].misspelled&&(f[g]=b[g].suggestions);for(var h in c){e(a.settings.spellchecker_language,h,!0,c[h]);for(var j=0;j<d.length;j++)if(d[j].cleaned===h){f[d[j].original]=c[h];break}}return i(d),f}var k=c()?b.supported():b.unsupported(),l=5;return{addWordToCache:e,retrieveWordFromCache:g,getCachedCleanedWords:h,cacheAndCombineResults:j,cacheCorrectlySpelledWords:i}}}),g("9",[],function(){function a(a){return a&&1==a.nodeType&&"false"===a.contentEditable}return function(b,c){function d(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:a.index,end:a.index+a[0].length,text:a[0],data:b}}function e(b){var c;if(3===b.nodeType)return b.data;if(q[b.nodeName]&&!p[b.nodeName])return"";if(a(b))return"\n";if(c="",(p[b.nodeName]||r[b.nodeName])&&(c+="\n"),b=b.firstChild)do c+=e(b);while(b=b.nextSibling);return c}function f(a){function b(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}for(var c=[],d=0;d<a.length;d++)b(c,a[d])||c.push(a[d]);return c}function g(a){var b=e(a).match(c);return b?f(b):[]}function h(b,c,d){var e,f,g,h,i,j=[],k=0,l=b,m=0;c=c.slice(0),c.sort(function(a,b){return a.start-b.start}),i=c.shift();a:for(;;){if((p[l.nodeName]||r[l.nodeName]||a(l))&&k++,3===l.nodeType&&(!f&&l.length+k>=i.end?(f=l,h=i.end-k):e&&j.push(l),!e&&l.length+k>i.start&&(e=l,g=i.start-k),k+=l.length),e&&f){for(var n=!1,o=e;o!=b;o=o.parentNode)o.className===t&&(n=!0);if(n||(l=d({startNode:e,startNodeIndex:g,endNode:f,endNodeIndex:h,innerNodes:j,match:i.text,matchIndex:m}),k-=f.length-h),e=null,f=null,j=[],i=c.shift(),m++,!i)break}else if(q[l.nodeName]&&!p[l.nodeName]||!l.firstChild){if(l.nextSibling){l=l.nextSibling;continue}}else if(!a(l)){l=l.firstChild;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===b)break a;l=l.parentNode}}}function i(a,b){function c(c,d){var e=a[d];e.stencil||(e.stencil=b(e));var f=e.stencil.cloneNode(!1);return f.setAttribute("data-mce-index",d),c&&f.appendChild(s.doc.createTextNode(c)),f}return function(a){var b,d,e,f=a.startNode,g=a.endNode,h=a.matchIndex,i=s.doc;if(f===g){var j=f;e=j.parentNode,a.startNodeIndex>0&&(b=i.createTextNode(j.data.substring(0,a.startNodeIndex)),e.insertBefore(b,j));var k=c(a.match,h);return e.insertBefore(k,j),a.endNodeIndex<j.length&&(d=i.createTextNode(j.data.substring(a.endNodeIndex)),e.insertBefore(d,j)),j.parentNode.removeChild(j),k}b=i.createTextNode(f.data.substring(0,a.startNodeIndex)),d=i.createTextNode(g.data.substring(a.endNodeIndex));for(var l=c(f.data.substring(a.startNodeIndex),h),m=[],n=0,o=a.innerNodes.length;n<o;++n){var p=a.innerNodes[n],q=c(p.data,h);p.parentNode.replaceChild(q,p),m.push(q)}var r=c(g.data.substring(0,a.endNodeIndex),h);return e=f.parentNode,e.insertBefore(b,f),e.insertBefore(l,f),e.removeChild(f),e=g.parentNode,e.insertBefore(r,g),e.insertBefore(d,g),e.removeChild(g),r}}function j(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function k(a,b){var c=[];return l(a,function(a,d){b(a,d)&&c.push(a)}),a=c,c}function l(a,b){for(var c=0,d=a.length;c<d&&b(a[c],c)!==!1;c++);return this}function m(a,b,c){return a.length&&h(c,a,i(a,b)),this}function n(a,b,c){var f=[],g=e(c);if(g&&a.global)for(;o=a.exec(g);)f.push(d(o,b));return f}var o,p,q,r,s=b.dom,t="mce-spellchecker-ignore";return p=b.schema.getBlockElements(),q=b.schema.getWhiteSpaceElements(),r=b.schema.getShortEndedElements(),{getText:e,getWords:g,each:l,filter:k,find:n,wrap:m,indexOf:j}}}),h("f",tinymce.util.XHR),h("g",tinymce.util.URI),g("a",["f","g","7"],function(a,b,c){return function(d,e){function f(a){return"function"==typeof a}function g(a){for(var b=0,c=0,e=[],f=0;f<a.length;f++)b+=a[f].length,b>q&&(e.push({words:a.slice(c,f+1),language:d.settings.spellchecker_language}),c=f+1,b=0);return c!=a.length&&e.push({words:a.slice(c,a.length),language:d.settings.spellchecker_language}),p=e.length,o=[],e}function h(f,g,h){var i={url:new b(e).toAbsolute(d.settings.spellchecker_rpc_url+r),type:"post",content_type:"application/json",data:c.serialize(f),success:function(a){var b=c.parse(a);b?g(b):h("Server response wasn't valid json.")},error:function(){h(tinymce.translate(["The spelling service was not found: ({0})",d.settings.spellchecker_rpc_url]))}},j=n();return j&&(i.requestheaders=[{key:"tiny-api-key",value:j}]),d.settings.spellchecker_rpc_url?void a.send(i):void h("You need to specify the spellchecker_rpc_url setting.")}function i(a,b,c){var e=d.settings.spellchecker_handler,g=f(e)?e:h;g(a,b,c)}function j(a,b,c,d,e){var f=d.getCachedCleanedWords(e.filter(a));if(!(s>t)){var h=function(a){l(a,f,b,c,d)},j=function(a){m(a)};if(f.wordsToCheck.length>0)for(var k=g(f.cleanedWordsForServer),n=0;n<k.length;n++)i(k[n],h,j);else{var o=d.cacheAndCombineResults(f.cachedData,[],f.wordsToCheck);c(o,b)}}}function k(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c].spell)b[d]=a[c].spell[d];return b}function l(a,b,c,d,e){if(o.push(a),o.length===p){var f=k(o),g=e.cacheAndCombineResults(b.cachedData,f,b.wordsToCheck);d(g,c)}}function m(a){d.setProgressState(!1),d.notificationManager.open({text:a,type:"error"}),s++}function n(){return d.settings.api_key||d.settings.spellchecker_api_key}var o,p,q=15e3,r="/1/correction",s=0,t=5;return{spellcheck:j}}}),h("6",tinymce.util.Tools),g("b",["6"],function(a){return function(b,c){function d(a){var b=a.getAttribute("data-mce-index");return"number"==typeof b?""+b:b}function e(b,c){var e,f=[];if(e=a.toArray(c.getElementsByTagName("span")),e.length)for(var g=0;g<e.length;g++){var h=d(e[g]);null!==h&&h.length&&h===b.toString()&&f.push(e[g])}return f}function f(a,d,e,f){h(d,e);var g=f.find(c,void 0,d);g=f.filter(g,function(b){return!!a[b.text]}),f.wrap(g,function(a){return b.dom.create("span",{"class":e,"data-mce-bogus":1,"data-mce-word":a.text})},d)}function g(a){for(var b=a.parentNode,c=a.childNodes;c.length>0;)b.insertBefore(c[0],a);a.parentNode.removeChild(a)}function h(a,c){for(var d=b.dom.select("span."+c,a),e=0;e<d.length;e++)g(d[e])}return{getElmIndex:d,findSpansByIndex:e,markErrors:f,unwrapWordNode:g,clearWordMarks:h}}}),h("c",tinymce.dom.DOMUtils),h("d",tinymce.ui.Menu),g("2",["9","a","b","6","c","d"],function(a,b,c,d,e,f){return function(g,h,i,j,k){function l(a,b){var c=g.selection.getBookmark();L.markErrors(a,b,I,m()),g.selection.moveToBookmark(c)}function m(){return H.textMatcher||(H.textMatcher=new a(g,k)),H.textMatcher}function n(a,b,c){g.selection.collapse(),c?(i.addWord(a),d.each(g.dom.select("span."+I),function(b){b.getAttribute(K)===a&&g.dom.remove(b,!0)})):d.each(b,function(a){a.className=J})}function o(a,b){var c=[],i=h.retrieveWordFromCache(g.settings.spellchecker_language,a).suggestions;d.each(i,function(a){c.push({text:a,onclick:function(){g.insertContent(g.dom.encode(a)),g.dom.remove(b)}})}),c.push({text:"-"}),c.push.apply(c,[{text:"Ignore",onclick:function(){n(a,b)}},{text:"Ignore all",onclick:function(){n(a,b,!0)}}]),D=new f({items:c,context:"contextmenu",onautohide:function(a){a.target.className.indexOf("spellchecker")!=-1&&a.preventDefault()},onhide:function(){D.remove(),D=null}}),D.renderTo(document.body);var j=e.DOM.getPos(g.getContentAreaContainer()),k=g.dom.getPos(b[0]),l=g.dom.getRoot();"BODY"==l.nodeName?(k.x-=l.ownerDocument.documentElement.scrollLeft||l.scrollLeft,k.y-=l.ownerDocument.documentElement.scrollTop||l.scrollTop):(k.x-=l.scrollLeft,k.y-=l.scrollTop),j.x+=k.x,j.y+=k.y,D.moveTo(j.x,j.y+b[0].offsetHeight)}function p(a){for(var b=g.getBody(),c=b,d=g.schema.getBlockElements();a!=b&&(null!==a&&void 0!==a);a=a.parentNode)if(d[a.nodeName]){c=a;break}return c}function q(){M?(z(),L.clearWordMarks(g.getBody(),I)):(y(),r(g.getBody(),I)),M=!M,F&&F.active(M),G&&G.active(M)}function r(a){N.spellcheck(m().getWords(a),a,l,h,i),g.focus()}function s(){D&&(D.remove(),D=void 0)}function t(a){if(37!==(a.which||a.keycode)&&38!==(a.which||a.keycode)&&39!==(a.which||a.keycode)&&40!==(a.which||a.keycode)){var b=g.selection.getNode();if(e.DOM.hasClass(b,I)||e.DOM.hasClass(b,J)){var c=p(b),d=L.getElmIndex(b),f=L.findSpansByIndex(d,c);if(f.length>0){for(var h=g.selection.getBookmark(),i=0;i<f.length;i++)L.unwrapWordNode(f[i]);g.selection.moveToBookmark(h)}}}}function u(a){var b=g.selection.getNode(),c=p(b);32===(a.which||a.keycode)&&r(c)}function v(a,b){return g.$.contains(a,b)||a===b}function w(a){if(!a.selectionChange){var b=E;v(g.getBody(),a.element)&&(E=p(a.element),b!==E&&b&&r(b))}}function x(a){var b=a.target;if(e.DOM.hasClass(b,I)){var c=L.getElmIndex(b),d=L.findSpansByIndex(c,p(b));if(d.length>0){var f=g.dom.createRng();f.setStartBefore(d[0]),f.setEndAfter(d[d.length-1]),g.selection.setRng(f),o(b.getAttribute(K),d,a)}a.preventDefault(),a.stopImmediatePropagation()}}function y(){g.on("remove",s),g.on("keydown",t),g.on("keyup",u),g.on("nodechange",w)}function z(){g.off("remove",s),g.off("keydown",t),g.off("keyup",u),g.off("nodechange",w)}function A(a){g.settings.spellchecker_language=a,M&&r(g.getBody())}function B(a){F=a.control,F.active(M)}function C(a){G=a.control,a.control.on("show",function(){this.active(M)}),G.active(M)}var D,E,F,G,H=this,I="mce-spellchecker-word",J="mce-spellchecker-ignore",K="data-mce-word",L=new c(g,k),M=!0,N=new b(g,j);return g.on("contextmenu",x,!0),y(),{languageMenuItemClick:A,spellcheck:q,spellcheckButtonPostRender:B,spellcheckMenuItemPostRender:C}}}),g("e",[],function(){function a(a,b){return a.windowManager.open({layout:"flex",align:"stretch",direction:"column",title:"Spellcheck",spacing:10,padding:10,callbacks:b,minWidth:350,items:[{type:"label",name:"textlabel",text:"Misspelled word"},{type:"textbox",name:"text",spellcheck:!1},{type:"label",name:"suggestionslabel",text:"Suggestions"},{type:"container",layout:"flex",direction:"row",align:"stretch",spacing:10,items:[{type:"selectbox",name:"suggestions",minWidth:150,flex:1,size:6,border:1},{type:"container",layout:"flex",flex:1,spacing:5,direction:"column",pack:"center",align:"stretch",items:[{type:"button",subtype:"primary",name:"change",text:"Change",onclick:"change"},{type:"button",name:"ignore",text:"Ignore",onclick:"ignore"},{type:"button",name:"ignoreall",text:"Ignore all",onclick:"ignoreall"}]}]}],onsubmit:function(a){a.preventDefault(),b.submit()},buttons:[{text:"Close",onclick:"close"}]})}return{open:a}}),g("3",["9","a","b","e","6"],function(a,b,c,d,e){return function(f,g,h,i,j){function k(a,b){F.markErrors(a,b,C,l()),f.setProgressState(!1),p()}function l(){return B.textMatcher||(B.textMatcher=new a(f,j)),B.textMatcher}function m(a){return g.retrieveWordFromCache(f.settings.spellchecker_language,a).suggestions}function n(){var a,b=r(),c=s(b),d=t(b),e=y.find("#text")[0].value(),g=y.find("#suggestions")[0].getEl().value;e!==c?a=document.createTextNode(e):g&&(a=document.createTextNode(g)),a&&(f.dom.replace(a,d),q())}function o(a){var b=r(),c=s(b),d=t(b);f.selection.collapse(),a?(h.addWord(c),e.each(f.dom.select("span."+C),function(a){a.getAttribute(E)==c&&f.dom.remove(a,!0)})):f.dom.remove(d,!0),q()}function p(){var a=r();if(a){z&&z.active(!0),A&&A.active(!0);var b=s(a),c=m(b),e=t(a);f.dom.addClass(e,D),y=d.open(f,H),y.find("#text")[0].value(b),y.find("#suggestions")[0].options(c),y.find("#suggestions")[0].getEl().selectedIndex=0,y.find("#suggestions")[0].getEl().focus(),y.on("close",function(){z&&z.active(!1),A&&A.active(!1),y=void 0,F.clearWordMarks(f.getBody(),C)})}else{var g=tinymce.translate("No misspellings found.");f.notificationManager.open({text:g,type:"info",timeout:3e3})}}function q(){var a=r();if(a){var b=s(a);y.find("#text").value(b);var c=m(b),d=y.find("#suggestions")[0];d.options(c),d.getEl().selectedIndex=0,d.getEl().focus();var e=t(a);f.dom.addClass(e,D)}else y&&y.close()}function r(){return f.dom.select("span."+C)[0]}function s(a){return a.getAttribute(E)}function t(a){var b=F.getElmIndex(a);return F.findSpansByIndex(b,f.getBody())}function u(a){f.settings.spellchecker_language=a}function v(){f.setProgressState(!0),G.spellcheck(l().getWords(f.getBody()),f.getBody(),k,g,h)}function w(a){z=a.control}function x(a){A=a.control}var y,z,A,B=this,C="mce-match-marker",D="mce-match-marker-selected",E="data-mce-word",F=new c(f,j),G=new b(f,i),H={change:n,submit:n,ignore:function(){o(!1)},ignoreall:function(){o(!0)},close:function(){y.close()}};return{languageMenuItemClick:u,spellcheck:v,spellcheckButtonPostRender:w,spellcheckMenuItemPostRender:x}}}),g("4",["6"],function(a){return function(){var b={},c=function(a){b[a.toLowerCase()]=!0},d=function(b){a.each(b,c)},e=function(c){return a.grep(c,function(a){return!b[a.toLowerCase()]})};return{addWord:c,addWords:d,filter:e}}}),h("5",tinymce.PluginManager),g("0",["1","2","3","4","5","6"],function(a,b,c,d,e,f){return e.requireLangPack("tinymcespellchecker","ar,ca,cs,da,de,el,es,fa,fi,fr_FR,he_IL,hr,hu_HU,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_BR,pt_PT,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_CN,zh_TW"),e.add("tinymcespellchecker",function(e,g){function h(a){var b=e.settings.spellchecker_language;f.each(a.control.items(),function(a){a.active(a.data.data===b)})}function i(a){a.control.on("show",function(a){h(a)})}function j(a){var b=a.split(",");return f.map(b,function(a){var b=a.split("=");return{selectable:!0,text:b[0],data:b[1],onclick:function(){q.languageMenuItemClick(b[1])}}})}var k="[\\w'\\-\\u00C0-\\u00FF\\uFEFF\\u2018\\u2019]+",l=e.getParam("spellchecker_wordchar_pattern")||new RegExp(k,"g");e.settings.spellchecker_language=e.settings.spellchecker_language||"en";var m=e.settings.spellchecker_languages||"US English=en,UK English=en_gb,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Norwegian=nb,Brazilian Portuguese=pt,Iberian Portuguese=pt_pt,Spanish=es,Swedish=sv",n=new a(e),o=new d;o.addWords(e.settings.spellchecker_whitelist);var p=e.getParam("spellchecker_dialog"),q=p?new c(e,n,o,g,l,m):new b(e,n,o,g,l,m),r=j(m),s={tooltip:"Spellcheck",onclick:q.spellcheck,onPostRender:q.spellcheckButtonPostRender};r.length>1&&(s.type="splitbutton",s.menu=r,s.onshow=h),e.addButton("spellchecker",s),e.addCommand("mceSpellCheck",q.spellcheck),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:q.spellcheck,onPostRender:q.spellcheckMenuItemPostRender,selectable:!0}),e.addMenuItem("spellcheckerlanguage",{text:"Spellcheck Language",context:"tools",menu:r,onPostRender:i})}),{}}),d("0")()}();